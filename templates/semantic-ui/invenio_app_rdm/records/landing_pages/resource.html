{% extends "invenio_app_rdm/records/landing_pages/core_landing_page.html" -%}
{% set resource_type = "resource" %}
    {%- block toptags -%}
        <section id="record-tags" class="rel-mt-1" aria-label="{{ _('Record tags') }}">
            <div class="tags top-tags">
                <span class="tag">{{ _(config.CORE_ENTITIES_LABELS.get(record.metadata.resource_type.title.get('en'))) }}</span>
                {% set resource_type_specific = val(config.RECORD_SPECIAL_FIELDS.RESOURCE_TYPE_SPECIFIC, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.RESOURCE_TYPE_SPECIFIC], resource_type) %}
                {% set resource_type_general = val(config.RECORD_SPECIAL_FIELDS.RESOURCE_TYPE_GENERAL, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.RESOURCE_TYPE_GENERAL], resource_type) %}
                {% if resource_type_general %}
                    <span class="tag" title="Resource type">{{resource_type_general}}{%- if resource_type_specific -%}/{{resource_type_specific}}{%- endif -%}</span>
                {% endif %}
                {%- set status = val(config.RECORD_SPECIAL_FIELDS.ACCESS_RESTRICTION, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.ACCESS_RESTRICTION], resource_type) -%}
                <span class="tag {%- if config.IS_ACCESS_STATUS_OPEN[record.custom_fields[config.RECORD_SPECIAL_FIELDS.ACCESS_RESTRICTION]] %} success {%- else %} error {%- endif -%}">{{ status }}</span>
            </div>
        </section>
    {%- endblock -%}

    {%- block description -%}
        {% set description = val(config.RECORD_SPECIAL_FIELDS.DESCRIPTION, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.DESCRIPTION], resource_type) %}
        {% if description %}
            <section id="record-description" aria-label="{{ _('Record Description') }}" style="margin-top: 1rem;">
                <p>{{ description }}</p>
            </section>
        {% endif %}
    {%- endblock -%}

    {%- block lang_and_date -%}
        {% set language = val(config.RECORD_SPECIAL_FIELDS.LANGUAGE, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.LANGUAGE], resource_type) %}
        {% set created = val(config.RECORD_SPECIAL_FIELDS.CREATED,record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.CREATED], resource_type) %}
        {% set modified = val(config.RECORD_SPECIAL_FIELDS.MODIFIED, record.ui.custom_fields[config.RECORD_SPECIAL_FIELDS.MODIFIED], resource_type) %}
        {% if language or created or modified %}
            <section class="detail">
                {% if language %}
                    <p class="muted"><b>{{ _('Language') }}:</b> {{ language }}</p>
                {% endif %}
                {% if created %}
                    <p class="muted"><b>{{ _('Created') }}:</b>{{ created }}</p>
                {% endif %}
                {% if modified %}
                    <p class="muted"><b>{{ _('Modified') }}:</b>{{ modified }}</p>
                {% endif %}
            </section>
        {% endif %}
    {%- endblock -%}


    {%- block extids -%}
        {% set icd10val = val("mex:icd10code", record.ui.custom_fields["mex:icd10code"], resource_type) %}
        {% set loincval = val("mex:loincId", record.ui.custom_fields["mex:loincId"], resource_type) %}
        {% set meshval = val("mex:meshId", record.ui.custom_fields["mex:meshId"], resource_type) %}
        {% if icd10val or loincval or meshval %}
            <section id="record-ids" aria-label="{{ _('Record IDs') }}">
                <div class="id-tags">
                    {% if icd10val %}
                        <div class="id-tag icd10">
                            <div class="label">
                                <div class="circle"></div>
                                <p class="text">ICD-10</p>
                            </div>
                            {{ icd10val }}
                        </div>
                    {% endif %}
                    {% if meshval %}
                        <div class="id-tag mesh">
                            <div class="label">
                                <div class="circle"></div>
                                <p class="text" style="margin-left: -3rem">MESH ID</p>
                            </div>
                            {{ meshval }}
                        </div>
                    {% endif %}
                    {% if loincval %}
                        <div class="id-tag loinc">
                            <div class="label">
                                <div class="circle"></div>
                                <p class="text">LOINC</p>
                            </div>
                            {{ loincval }}
                        </div>
                    {% endif %}
                </div>
            </section>
        {% endif %}
    {%- endblock -%}
